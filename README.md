# CanSat-Junior

## Описание проекта
Этот проект представляет собой адаптацию программного обеспечения из ветки main, разработанного для накопителя полетных данных Feather FDR. Совместим с аппаратной версией `v1.0`. Код предназначен для сбора данных с датчиков давления, температуры, ускорения и угловой скорости, а также для управления автоматической системой спасения.

## Основные функции
- Чтение данных с датчиков BMP180(BMP280) (давление, температура) и LSM6DS3TR (акселерометр, гироскоп)
- Запись данных на microSD карту
- Передача данных по LoRa (E22-400MM22S)
- Управление системой спасения по заданным условиям
- Обнаружение старта, апогея и посадки
- Система встроенного самоконтроля (BITE) сообщает об ошибках по UART и с использованием звукового сигнала

## Структура проекта
```
/
│── cansat-junior.ino      # BITE и основной код управления полётом
│── BMP180_280.h           # Библиотека для работы с датчиком BMP180 или BMP280 (определяется автоматичсеки)
│── MPU6050_9250.h         # Библиотека для работы с MPU6050/9250
│── POST_Encoder.h         # Кодирование POST-сообщений
│── E22_400MM22S.h         # Библиотека для работы с LoRa модулем на 433 MHz
│── IICFuncs.h             # Функции для работы с I2C на чипе ATmega328
│── README.md              # Данный файл
```

## Требования
- Платформа: `Feather FDR v1.0` на базе ATmega328
- Прием телеметрии: `LoRa_Link v0.2` (приложение `FeatherFDR`)
- Среда разработки: Arduino IDE
- Зависимости:
  - `SD.h` (работа с microSD картой)
  - `BMP180_280.h` (библиотека для датчика давления)
  - `MPU6050_9250.h` (библиотека для акселерометра и гироскопа)
  - `E22_400MM22S.h` (библиотека для LoRa)
  - `POST_Encoder.h` (кодирование POST-сообщений для BITE оповещений)
  - `IICFuncs.h` (функции I2C)

## Установка и использование
1. Клонируйте репозиторий:
   ```sh
   git clone https://github.com/nate-hunter-max/cansat-junior.git
   ```
2. Откройте проект в среде разработки Arduino IDE.
3. Выберите плату "Arduino nano (old bootloader)" и порт, к которому подключен накопитель. 
4. Компилируйте и загрузите код на микроконтроллер.
5. Подключите питание и ожидайте сигнала от BITE (POST сообщение).

## Коды ошибок (POST-сообщения)
Для диагностики системы используются POST-сообщения, передаваемые через динамик:
- `Post.send("a", 2);` – Система инициализирована успешно (одиночный сигнал "точка").
- `Post.send("b", 2);` – Ошибка инициализации BMP280 (код ошибки: "точка-точка-тире").
- `Post.send("c", 2);` – Ошибка инициализации MPU6050/9250 (код ошибки: "точка-тире-точка").
- `Post.send("d", 2);` – Ошибка инициализации microSD карты (код ошибки: "тире-точка-точка-точка").


## Авторы
Разработано командой **SHARAGA_FOREVER!** (Mistress Lukutar, Nate Hunter, Crypto Schizo, Chiharu, Ithara_The_Verdant_Shadow, SheetLord) совместно с разработчиками `FeatherFDR`

## Лицензия
Проект распространяется под лицензией MIT. Свободное использование с указанием авторства.
